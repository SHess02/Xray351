CREATE DATABASE alumniconnectdb;

CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Favorite_List` (
  `listid` INT NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`listid`));


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Student` (
  `email` VARCHAR(45) NOT NULL,
  `name` VARCHAR(45) NULL,
  `graduationyear` YEAR NULL,
  `major` VARCHAR(45) NULL,
  `aboutme` LONGTEXT NULL,
  `Favorite_List_listid` INT NOT NULL,
  PRIMARY KEY (`email`, `Favorite_List_listid`),
  INDEX `fk_Student_Favorite_List1_idx` (`Favorite_List_listid` ASC),
  CONSTRAINT `fk_Student_Favorite_List1`
    FOREIGN KEY (`Favorite_List_listid`)
    REFERENCES `alumniconnectdb`.`Favorite_List` (`listid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Admin` (
  `email` VARCHAR(45) NOT NULL,
  `name` VARCHAR(45) NULL,
  `jobtitle` VARCHAR(45) NULL,
  PRIMARY KEY (`email`));


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Company` (
  `companyid` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `description` LONGTEXT NULL,
  `activelistings` INT NULL,
  `Admin_email` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`companyid`, `Admin_email`),
  INDEX `fk_Company_Admin1_idx` (`Admin_email` ASC),
  CONSTRAINT `fk_Company_Admin1`
    FOREIGN KEY (`Admin_email`)
    REFERENCES `alumniconnectdb`.`Admin` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Alumni` (
  `email` VARCHAR(45) NOT NULL,
  `Company_companyid` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `graduationyear` VARCHAR(45) NULL,
  `major` VARCHAR(45) NULL,
  `aboutme` LONGTEXT NULL,
  PRIMARY KEY (`email`, `Company_companyid`),
  INDEX `fk_Alumni_Company1_idx` (`Company_companyid` ASC),
  CONSTRAINT `fk_Alumni_Company1`
    FOREIGN KEY (`Company_companyid`)
    REFERENCES `alumniconnectdb`.`Company` (`companyid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Job` (
  `jobid` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NULL,
  `description` LONGTEXT NULL,
  `opendate` DATE NULL,
  `Alumni_email` VARCHAR(45) NOT NULL,
  `Admin_email` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`jobid`, `Alumni_email`, `Admin_email`),
  INDEX `fk_Job_Alumni1_idx` (`Alumni_email` ASC),
  INDEX `fk_Job_Admin1_idx` (`Admin_email` ASC),
  CONSTRAINT `fk_Job_Alumni1`
    FOREIGN KEY (`Alumni_email`)
    REFERENCES `alumniconnectdb`.`Alumni` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Job_Admin1`
    FOREIGN KEY (`Admin_email`)
    REFERENCES `alumniconnectdb`.`Admin` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Application` (
  `Student_email` VARCHAR(45) NOT NULL,
  `Job_jobid` INT NOT NULL,
  `datecreated` DATE NULL,
  `resume` BLOB NULL,
  PRIMARY KEY (`Student_email`, `Job_jobid`),
  INDEX `fk_Applications_Student1_idx` (`Student_email` ASC),
  INDEX `fk_Applications_Job1_idx` (`Job_jobid` ASC),
  CONSTRAINT `fk_Applications_Student1`
    FOREIGN KEY (`Student_email`)
    REFERENCES `alumniconnectdb`.`Student` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Applications_Job1`
    FOREIGN KEY (`Job_jobid`)
    REFERENCES `alumniconnectdb`.`Job` (`jobid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Event` (
  `eventid` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `location` VARCHAR(45) NULL,
  `datetime` DATETIME NULL,
  `Alumni_email` VARCHAR(45) NOT NULL,
  `Admin_email` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`eventid`, `Alumni_email`, `Admin_email`),
  INDEX `fk_Event_Alumni1_idx` (`Alumni_email` ASC),
  INDEX `fk_Event_Admin1_idx` (`Admin_email` ASC),
  CONSTRAINT `fk_Event_Alumni1`
    FOREIGN KEY (`Alumni_email`)
    REFERENCES `alumniconnectdb`.`Alumni` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Event_Admin1`
    FOREIGN KEY (`Admin_email`)
    REFERENCES `alumniconnectdb`.`Admin` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Message` (
  `messageid` INT NOT NULL AUTO_INCREMENT,
  `Student_email` VARCHAR(45) NOT NULL,
  `Alumni_email` VARCHAR(45) NOT NULL,
  `datetime` DATETIME NULL,
  `contents` LONGTEXT NULL,
  `to` VARCHAR(45) NULL,
  `from` VARCHAR(45) NULL,
  PRIMARY KEY (`messageid`, `Student_email`, `Alumni_email`),
  INDEX `fk_Message_Student1_idx` (`Student_email` ASC),
  INDEX `fk_Message_Alumni1_idx` (`Alumni_email` ASC),
  CONSTRAINT `fk_Message_Student1`
    FOREIGN KEY (`Student_email`)
    REFERENCES `alumniconnectdb`.`Student` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Message_Alumni1`
    FOREIGN KEY (`Alumni_email`)
    REFERENCES `alumniconnectdb`.`Alumni` (`email`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Favorite_Company` (
  `Company_companyid` INT NOT NULL,
  `Favorite_List_listid` INT NOT NULL,
  PRIMARY KEY (`Company_companyid`, `Favorite_List_listid`),
  INDEX `fk_Favorite_Company_Company1_idx` (`Company_companyid` ASC),
  INDEX `fk_Favorite_Company_Favorite_List1_idx` (`Favorite_List_listid` ASC),
  CONSTRAINT `fk_Favorite_Company_Company1`
    FOREIGN KEY (`Company_companyid`)
    REFERENCES `alumniconnectdb`.`Company` (`companyid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Favorite_Company_Favorite_List1`
    FOREIGN KEY (`Favorite_List_listid`)
    REFERENCES `alumniconnectdb`.`Favorite_List` (`listid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);



CREATE TABLE IF NOT EXISTS `alumniconnectdb`.`Favorite_Job` (
  `Job_jobid` INT NOT NULL,
  `Favorite_List_listid` INT NOT NULL,
  PRIMARY KEY (`Job_jobid`, `Favorite_List_listid`),
  INDEX `fk_Favorite_Job_Job1_idx` (`Job_jobid` ASC),
  INDEX `fk_Favorite_Job_Favorite_List1_idx` (`Favorite_List_listid` ASC),
  CONSTRAINT `fk_Favorite_Job_Job1`
    FOREIGN KEY (`Job_jobid`)
    REFERENCES `alumniconnectdb`.`Job` (`jobid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Favorite_Job_Favorite_List1`
    FOREIGN KEY (`Favorite_List_listid`)
    REFERENCES `alumniconnectdb`.`Favorite_List` (`listid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);